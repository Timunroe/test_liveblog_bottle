% rebase('base.html', title='edit')

<h1 class="is-size-3 has-text-grey-lighter">Edit post</h1>
<form id="myForm" action="/save/{{ref_page}}/{{data['post_id']}}" method="post">
    <div class="field">
        <label class="label">Subhead (optional)</label>
        <div class="control">
            <input class="input" name="subhead" type="text" value="{{data['headline']}}" tabindex="1">
        </div>
        <p><small>Original content: {{data['headline']}}</small></p>
     </div>
    <!-- Create the editor container -->
    <div class="field">
        <label class="label">Content</label>
        <div class="control">
            <textarea name="content" id="editor" rows="4" cols="50">
                {{!data['content']}}
            </textarea>
        </div>
    </div>      

    <div class="field is-grouped">
        <div style="margin-right: 12px;">
            <label class="label">Status</label>
            <div class="control">
                <div class="select">
                    <select name="status">
                    % for item in ['draft', 'live']:
                        % if item == data['status']:
                            <option value="{{item}}" selected>{{item}}</option>
                        % else:
                            <option value="{{item}}" >{{item}}</option>
                        % end
                    % end
                    </select>
                </div>
            </div>
        </div>
        <div>
            <label class="label">Author</label>
            <div class="control">
                <div class="select">
                    <select name="author">
                        % for author in authors:
                            % if author['name'] == data['author']:
                                <option value="{{author['name']}}" selected>{{author['name']}}</option>
                            % else:
                                <option value="{{author['name']}}" >{{author['name']}}</option>
                            % end
                        % end
                    </select>
                </div>
            </div>
        </div>
    </div>

    <div class="field is-grouped">
        <div style="margin-right: 12px;">
            <div class="control">
                <button class="button is-link" form="myForm" value="save">Save</button>
            </div>
        </div>
        <div>
            <div class="control">
                <input type="button" onclick="location.href='/page/{{ref_page}}';" class="button is-link" form="myForm" value="Cancel">
            </div>
        </div>
    </div>
</form>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.8.5/tinymce.min.js"></script>
<script>
    tinymce.init({
        selector: '#editor',
        height : 150,
        statusbar: false,
        content_style: ".mce-content-body {font-size:14px;font-family:Verdana,Arial,Helvetica,sans-serif;}",
    });
</script>